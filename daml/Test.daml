module Test where

import Main

import DA.Date
import Daml.Script

testGetNumDays : Script ()
testGetNumDays = script do
    evaluator <- allocateParty "Evaluator"
    alice <- allocateParty "Alice"
    
    let
        myProject = ProjectInfo with
            lead = alice
            title = "Daml Fundamentals Certification Exam"
            details = "30 problems"
            soloProject = True
            participants = Left alice
            budgetRequirement = None
            startDate = date 2023 Feb 15
            endDate = date 2023 Mar 10

        days : Int = getDuration myProject

    debug myProject
    debug $ myProject.startDate < myProject.endDate 
    debug days

    aliceProposal <- submit alice do
        createCmd ProjectProposal with
            proposer = alice
            projectInfo = myProject
            evaluator
            note = "n/a"

    accs <- query @Accomplishment alice
    debug accs 

    aliceAccs <- submit evaluator do
        exerciseCmd aliceProposal ProposerAccomplishments with
            accomplishments = accs

    debug aliceAccs

    pure ()

